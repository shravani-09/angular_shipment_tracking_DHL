<div class="max-w-lg mx-auto mt-14 bg-white rounded-xl shadow-sm p-6" role="main">
  <h2 class="text-lg font-semibold mb-1">{{ constants.UI_LABELS.PAGE_HEADERS.CREATE_SHIPMENT }}</h2>
  <p class="text-sm text-gray-500 mb-6">
    {{ constants.UI_LABELS.PAGE_DESCRIPTIONS.CREATE_SHIPMENT_DESC }}
  </p>

  <form
    [formGroup]="form"
    (ngSubmit)="submit()"
    class="space-y-4"
    [attr.aria-label]="constants.UI_LABELS.ARIA_LABELS.CREATE_SHIPMENT_FORM"
  >
    <div>
      <input
        class="w-full border rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-yellow-400"
        [class.border-red-500]="form.get('origin')?.invalid && form.get('origin')?.touched"
        [placeholder]="constants.UI_LABELS.FORM_LABELS.ORIGIN"
        formControlName="origin"
        [attr.aria-label]="constants.UI_LABELS.ARIA_LABELS.SHIPMENT_ORIGIN"
        aria-describedby="originHelp originError"
      />
      <span id="originHelp" class="sr-only">
        {{ constants.UI_LABELS.HELP_TEXT.ORIGIN_HELP }}
      </span>
      <div
        *ngIf="form.get('origin')?.invalid && form.get('origin')?.touched"
        id="originError"
        class="mt-1 text-sm text-red-600"
        role="alert"
      >
        <p *ngIf="form.get('origin')?.errors?.['required']" class="flex items-center gap-1">
          <span class="text-red-500">●</span>
          {{ constants.VALIDATION_MESSAGES.ORIGIN.REQUIRED }}
        </p>
        <p *ngIf="form.get('origin')?.errors?.['minlength']" class="flex items-center gap-1">
          <span class="text-red-500">●</span>
          {{ constants.VALIDATION_MESSAGES.ORIGIN.MIN_LENGTH }}
        </p>
        <p *ngIf="form.get('origin')?.errors?.['maxlength']" class="flex items-center gap-1">
          <span class="text-red-500">●</span>
          {{ constants.VALIDATION_MESSAGES.ORIGIN.MAX_LENGTH }}
        </p>
      </div>
    </div>

    <div>
      <input
        class="w-full border rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-yellow-400"
        [class.border-red-500]="
          form.get('destination')?.invalid && form.get('destination')?.touched
        "
        [placeholder]="constants.UI_LABELS.FORM_LABELS.DESTINATION"
        formControlName="destination"
        [attr.aria-label]="constants.UI_LABELS.ARIA_LABELS.SHIPMENT_DESTINATION"
        aria-describedby="destinationHelp destinationError"
      />
      <span id="destinationHelp" class="sr-only">
        {{ constants.UI_LABELS.HELP_TEXT.DESTINATION_HELP }}
      </span>
      <div
        *ngIf="form.get('destination')?.invalid && form.get('destination')?.touched"
        id="destinationError"
        class="mt-1 text-sm text-red-600"
        role="alert"
      >
        <p *ngIf="form.get('destination')?.errors?.['required']" class="flex items-center gap-1">
          <span class="text-red-500">●</span>
          {{ constants.VALIDATION_MESSAGES.DESTINATION.REQUIRED }}
        </p>
        <p *ngIf="form.get('destination')?.errors?.['minlength']" class="flex items-center gap-1">
          <span class="text-red-500">●</span>
          {{ constants.VALIDATION_MESSAGES.DESTINATION.MIN_LENGTH }}
        </p>
        <p *ngIf="form.get('destination')?.errors?.['maxlength']" class="flex items-center gap-1">
          <span class="text-red-500">●</span>
          {{ constants.VALIDATION_MESSAGES.DESTINATION.MAX_LENGTH }}
        </p>
      </div>
    </div>

    <div>
      <input
        type="date"
        class="w-full border rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-yellow-400"
        [class.border-red-500]="
          form.get('estimatedDeliveryDate')?.invalid && form.get('estimatedDeliveryDate')?.touched
        "
        [min]="minDate"
        formControlName="estimatedDeliveryDate"
        [attr.aria-label]="constants.UI_LABELS.ARIA_LABELS.ESTIMATED_DELIVERY_DATE"
        aria-describedby="dateHelp dateError"
      />
      <span id="dateHelp" class="sr-only">
        {{ constants.UI_LABELS.HELP_TEXT.DATE_HELP }}
      </span>
      <div
        *ngIf="
          form.get('estimatedDeliveryDate')?.invalid && form.get('estimatedDeliveryDate')?.touched
        "
        id="dateError"
        class="mt-1 text-sm text-red-600"
        role="alert"
      >
        <p
          *ngIf="form.get('estimatedDeliveryDate')?.errors?.['required']"
          class="flex items-center gap-1"
        >
          <span class="text-red-500">●</span>
          {{ constants.VALIDATION_MESSAGES.DATE.REQUIRED }}
        </p>
        <p
          *ngIf="form.get('estimatedDeliveryDate')?.errors?.['futureDate']"
          class="flex items-center gap-1"
        >
          <span class="text-red-500">●</span>
          {{ constants.VALIDATION_MESSAGES.DATE.FUTURE_DATE }}
        </p>
      </div>
    </div>

    <button
      type="submit"
      class="w-full bg-yellow-400 hover:bg-yellow-500 text-black font-medium py-2 rounded-md transition"
      [disabled]="loading"
      [attr.aria-busy]="loading"
    >
      {{
        loading
          ? constants.UI_LABELS.BUTTON_LABELS.CREATING_SHIPMENT
          : constants.UI_LABELS.BUTTON_LABELS.CREATE_SHIPMENT
      }}
    </button>

    <button
      type="button"
      (click)="cancel()"
      class="w-full mt-2 bg-gray-400 hover:bg-gray-500 text-black font-medium py-2 rounded-md transition"
    >
      Cancel
    </button>
  </form>

  <app-error-message *ngIf="error" [error]="error"></app-error-message>

  <div
    *ngIf="success"
    class="mt-3 rounded-md bg-green-50 border border-green-200 px-4 py-2"
    role="status"
    aria-live="polite"
  >
    <p class="text-sm text-green-700 font-medium">
      {{ success }}
    </p>
  </div>
</div>
